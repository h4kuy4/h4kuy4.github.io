<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Archlinux下搭建pytorch环境</title>
      <link href="/2021/10/08/build-pytorch-environment/"/>
      <url>/2021/10/08/build-pytorch-environment/</url>
      
        <content type="html"><![CDATA[<h2 id="安装Python"><a href="#安装Python" class="headerlink" title="安装Python"></a>安装Python</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S python</span><br></pre></td></tr></table></figure><p>安装好后执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python -V</span><br></pre></td></tr></table></figure><p>若输出python版本信息，则表示安装成功</p><h2 id="安装nvidia和cuda驱动"><a href="#安装nvidia和cuda驱动" class="headerlink" title="安装nvidia和cuda驱动"></a>安装nvidia和cuda驱动</h2><h3 id="安装nvidia驱动"><a href="#安装nvidia驱动" class="headerlink" title="安装nvidia驱动"></a>安装nvidia驱动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S nvidia-dkms nvidia-settings nvidia-utils</span><br></pre></td></tr></table></figure><p>安装好后重启，再执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvidia-smi</span><br></pre></td></tr></table></figure><p>若输出以下内容则表示显卡驱动安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| NVIDIA-SMI 470.74       Driver Version: 470.74       CUDA Version: 11.4     |</span><br><span class="line">|-------------------------------+----------------------+----------------------+</span><br><span class="line">| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |</span><br><span class="line">| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |</span><br><span class="line">|                               |                      |               MIG M. |</span><br><span class="line">|===============================+======================+======================|</span><br><span class="line">|   0  NVIDIA GeForce ...  Off  | 00000000:01:00.0 Off |                  N/A |</span><br><span class="line">| N/A   44C    P8    N/A /  N/A |      4MiB /  4042MiB |      0%      Default |</span><br><span class="line">|                               |                      |                  N/A |</span><br><span class="line">+-------------------------------+----------------------+----------------------+</span><br><span class="line"></span><br><span class="line">+-----------------------------------------------------------------------------+</span><br><span class="line">| Processes:                                                                  |</span><br><span class="line">|  GPU   GI   CI        PID   Type   Process name                  GPU Memory |</span><br><span class="line">|        ID   ID                                                   Usage      |</span><br><span class="line">|=============================================================================|</span><br><span class="line">|    0   N/A  N/A       511      G   /usr/lib/Xorg                       4MiB |</span><br><span class="line">+-----------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure><p><strong>注意，部分笔记本为独显渲染图形，然后由核显输出到自带的屏幕上，这些笔记本安装到这一步仅仅只能调用cuda，而无法渲染显示输出</strong></p><h3 id="安装cuda驱动"><a href="#安装cuda驱动" class="headerlink" title="安装cuda驱动"></a>安装cuda驱动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S cuda cudnn</span><br></pre></td></tr></table></figure><h2 id="安装Pytorch"><a href="#安装Pytorch" class="headerlink" title="安装Pytorch"></a>安装Pytorch</h2><p>Arch官方提供了4种pytorch包<br>|包名                       |包的特点               |<br>|:————————–|:———————-|<br>|<code>python-pytorch</code>           |可调用CPU和OpenCL运算  |<br>|<code>python-pytorch-cuda</code>      |可调用CPU，CUDA和OpenCL|<br>|<code>python-pytorch-opt</code>       |只可调用OpenCL运算     |<br>|<code>python-pytorch-opt-cuda</code>  |可调用CUDA和OpenCL     |<br>这里选用<code>python-pytorch-cuda</code>包<br>执行安装命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo pacman -S python-pytorch-cuda</span><br></pre></td></tr></table></figure><p>安装好后进入python的IDLE环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ python</span><br><span class="line">Python 3.9.7 (default, Aug 31 2021, 13:28:12)</span><br><span class="line">[GCC 11.1.0] on linux</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; import torch</span><br><span class="line">&gt;&gt;&gt; torch.cuda.is_available()</span><br><span class="line">True</span><br><span class="line">&gt;&gt;&gt; from torch.backends import cudnn</span><br><span class="line">&gt;&gt;&gt; cudnn.is_available()</span><br><span class="line">True</span><br></pre></td></tr></table></figure><p>若<code>torch.cuda.is_available()</code>和<code>cudnn.is_available()</code>输出均为<code>True</code>则Pytorch环境安装成功</p>]]></content>
      
      
      <categories>
          
          <category> Pytorch </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Archlinux </tag>
            
            <tag> Python </tag>
            
            <tag> Pytorch </tag>
            
            <tag> DeepLearning </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
